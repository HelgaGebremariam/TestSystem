
@{
    ViewBag.Title = "AllRuns";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link type="text/css" rel="stylesheet" href="/Content/jsgrid-theme.min.css" />

<h2>Test runs</h2>

<div id="runsGrid">
</div>

<script>
    $(function () {
        $("#runsGrid").jsGrid({
            height: "auto",
            width: "100%",

            sorting: false,
            paging: true,
            selecting: true,
            editing: false,
            autoload: true,
            pageLoading: true,
            pageSize: 15,
            pageIndex: 1,
            
            controller: {
                loadData: function (filter) {
                    var results;
                    var count

                    $.ajax({
                        url: "/DataProvider/GetGridRuns?page=" + filter.pageIndex + "&size=" + filter.pageSize,
                        dataType: "json",
                        async: false
                    }).done(function (response) {
                        results = response;
                    });
                    $.ajax({
                        url: "/DataProvider/GetGridCount?type=Runs",
                        dataType: "json",
                        async: false
                    }).done(function (res) {
                        count = res;
                    });

                    return {
                        data: results,
                        itemsCount: count
                    };
                }
            },

            fields: [
                { name: "RunNumber", type: "text", title:"Run#", width: 10 },
                { name: "AlgorithmName", type: "text", width: 40 },
                { name: "TestName", type: "text", width: 40 },
                { name: "Status", type: "text", width: 30 },
                { name: "UserName", type: "text", width: 30 },
                { name: "DateStart", type: "text", width: 40 },
                { name: "RocCalc", type: "checkbox", title: "Is Roc Calc", width: 20 }
            ]
        });

    });
</script>

